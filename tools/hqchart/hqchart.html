<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>hqchart | Web Doc</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/web-doc/image/logo_dm_32.ico">
    <meta name="description" content="前端技术文档">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/web-doc/assets/css/0.styles.52e0cd3d.css" as="style"><link rel="preload" href="/web-doc/assets/js/app.968e2cce.js" as="script"><link rel="preload" href="/web-doc/assets/js/2.fa5e476e.js" as="script"><link rel="preload" href="/web-doc/assets/js/39.00aa4147.js" as="script"><link rel="prefetch" href="/web-doc/assets/js/10.3c8c0460.js"><link rel="prefetch" href="/web-doc/assets/js/11.354ebf08.js"><link rel="prefetch" href="/web-doc/assets/js/12.d1978f9a.js"><link rel="prefetch" href="/web-doc/assets/js/13.6a005b4d.js"><link rel="prefetch" href="/web-doc/assets/js/14.8bd6c61b.js"><link rel="prefetch" href="/web-doc/assets/js/15.184d517b.js"><link rel="prefetch" href="/web-doc/assets/js/16.c75d1fa3.js"><link rel="prefetch" href="/web-doc/assets/js/17.ab3eac72.js"><link rel="prefetch" href="/web-doc/assets/js/18.600fbd9c.js"><link rel="prefetch" href="/web-doc/assets/js/19.2fd674d6.js"><link rel="prefetch" href="/web-doc/assets/js/20.e558302a.js"><link rel="prefetch" href="/web-doc/assets/js/21.4e2b4ec2.js"><link rel="prefetch" href="/web-doc/assets/js/22.d9e7cd0b.js"><link rel="prefetch" href="/web-doc/assets/js/23.b2773723.js"><link rel="prefetch" href="/web-doc/assets/js/24.a3a8f013.js"><link rel="prefetch" href="/web-doc/assets/js/25.e6ada6b1.js"><link rel="prefetch" href="/web-doc/assets/js/26.673b678d.js"><link rel="prefetch" href="/web-doc/assets/js/27.a7411a85.js"><link rel="prefetch" href="/web-doc/assets/js/28.1cb8b3f1.js"><link rel="prefetch" href="/web-doc/assets/js/29.b2012dec.js"><link rel="prefetch" href="/web-doc/assets/js/3.b67f60e8.js"><link rel="prefetch" href="/web-doc/assets/js/30.3698a203.js"><link rel="prefetch" href="/web-doc/assets/js/31.77072f1c.js"><link rel="prefetch" href="/web-doc/assets/js/32.cc30f380.js"><link rel="prefetch" href="/web-doc/assets/js/33.37018991.js"><link rel="prefetch" href="/web-doc/assets/js/34.97430545.js"><link rel="prefetch" href="/web-doc/assets/js/35.0955199c.js"><link rel="prefetch" href="/web-doc/assets/js/36.6320a278.js"><link rel="prefetch" href="/web-doc/assets/js/37.154e5c71.js"><link rel="prefetch" href="/web-doc/assets/js/38.805519c0.js"><link rel="prefetch" href="/web-doc/assets/js/4.ed2fab8b.js"><link rel="prefetch" href="/web-doc/assets/js/40.af475e42.js"><link rel="prefetch" href="/web-doc/assets/js/41.28c0d991.js"><link rel="prefetch" href="/web-doc/assets/js/5.b6108d4b.js"><link rel="prefetch" href="/web-doc/assets/js/6.ab1ee22d.js"><link rel="prefetch" href="/web-doc/assets/js/7.921d680a.js"><link rel="prefetch" href="/web-doc/assets/js/8.906fb63f.js"><link rel="prefetch" href="/web-doc/assets/js/9.7147fa0d.js">
    <link rel="stylesheet" href="/web-doc/assets/css/0.styles.52e0cd3d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/web-doc/" class="home-link router-link-active"><!----> <span class="site-name">Web Doc</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/web-doc/guide/" class="nav-link">
  管理后台
</a></div><div class="nav-item"><a href="/web-doc/new-member-guide/" class="nav-link">
  新手入门
</a></div><div class="nav-item"><a href="/web-doc/coding-style/" class="nav-link">
  风格指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-doc/tools/markdown/markdown.html" class="nav-link">
  Markdown
</a></li><li class="dropdown-item"><!----> <a href="/web-doc/promise/" class="nav-link">
  promise
</a></li><li class="dropdown-item"><!----> <a href="/web-doc/tools/hqchart/hqchart.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  hqchart
</a></li></ul></div></div><div class="nav-item"><a href="/web-doc/reference/" class="nav-link">
  参考
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="草稿" class="dropdown-title"><span class="title">草稿</span> <span class="arrow down"></span></button> <button type="button" aria-label="草稿" class="mobile-dropdown-title"><span class="title">草稿</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-doc/draft/gcf.html" class="nav-link">
  gcf
</a></li><li class="dropdown-item"><!----> <a href="/web-doc/draft/dgz.html" class="nav-link">
  dgz
</a></li><li class="dropdown-item"><!----> <a href="/web-doc/draft/zs.html" class="nav-link">
  zs
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/web-doc/guide/" class="nav-link">
  管理后台
</a></div><div class="nav-item"><a href="/web-doc/new-member-guide/" class="nav-link">
  新手入门
</a></div><div class="nav-item"><a href="/web-doc/coding-style/" class="nav-link">
  风格指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-doc/tools/markdown/markdown.html" class="nav-link">
  Markdown
</a></li><li class="dropdown-item"><!----> <a href="/web-doc/promise/" class="nav-link">
  promise
</a></li><li class="dropdown-item"><!----> <a href="/web-doc/tools/hqchart/hqchart.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  hqchart
</a></li></ul></div></div><div class="nav-item"><a href="/web-doc/reference/" class="nav-link">
  参考
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="草稿" class="dropdown-title"><span class="title">草稿</span> <span class="arrow down"></span></button> <button type="button" aria-label="草稿" class="mobile-dropdown-title"><span class="title">草稿</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web-doc/draft/gcf.html" class="nav-link">
  gcf
</a></li><li class="dropdown-item"><!----> <a href="/web-doc/draft/dgz.html" class="nav-link">
  dgz
</a></li><li class="dropdown-item"><!----> <a href="/web-doc/draft/zs.html" class="nav-link">
  zs
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>hqchart</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/web-doc/tools/hqchart/hqchart.html#引入hqchart" class="sidebar-link">引入hqchart</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/web-doc/tools/hqchart/hqchart.html#设置api域名" class="sidebar-link">设置API域名</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/web-doc/tools/hqchart/hqchart.html#hqchart横屏" class="sidebar-link">hqchart横屏</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/web-doc/tools/hqchart/hqchart.html#行情更新频率" class="sidebar-link">行情更新频率</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/web-doc/tools/hqchart/hqchart.html#自定义指标" class="sidebar-link">自定义指标</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web-doc/tools/hqchart/hqchart.html#ma" class="sidebar-link">MA</a></li><li class="sidebar-sub-header"><a href="/web-doc/tools/hqchart/hqchart.html#vol" class="sidebar-link">VOL</a></li><li class="sidebar-sub-header"><a href="/web-doc/tools/hqchart/hqchart.html#macd" class="sidebar-link">MACD</a></li><li class="sidebar-sub-header"><a href="/web-doc/tools/hqchart/hqchart.html#kdj" class="sidebar-link">KDJ</a></li><li class="sidebar-sub-header"><a href="/web-doc/tools/hqchart/hqchart.html#rsi" class="sidebar-link">RSI</a></li><li class="sidebar-sub-header"><a href="/web-doc/tools/hqchart/hqchart.html#boll" class="sidebar-link">BOLL</a></li><li class="sidebar-sub-header"><a href="/web-doc/tools/hqchart/hqchart.html#pb" class="sidebar-link">PB</a></li><li class="sidebar-sub-header"><a href="/web-doc/tools/hqchart/hqchart.html#pe-ttm" class="sidebar-link">PE(TTM)</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="hqchart"><a href="#hqchart" class="header-anchor">#</a> hqchart</h1> <p>hqchart是一款制作行情的前端插件。<a href="https://github.com/jones2000/HQChart" target="_blank" rel="noopener noreferrer">github地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，下载后关于vue的demo在vuehqchart文件夹下。</p> <h2 id="引入hqchart"><a href="#引入hqchart" class="header-anchor">#</a> 引入hqchart</h2> <ol><li><strong>目录结构</strong></li></ol> <div class="language- extra-class"><pre class="language-text"><code>  ├── assets                       
  │   ├── hqChart                    
  │   │   ├── umychart.stock.vue.js           # 股票数据
  │   │   ├── umychart.vue.js                 # 图形绘制
</code></pre></div><ol start="2"><li><strong>分钟走势图、历史K线图</strong></li></ol> <ul><li><p>引入初始文件：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> jsChart <span class="token keyword">from</span> <span class="token string">'/assets/hqChart/umychart.vue.min.js'</span>
<span class="token keyword">import</span> jsStock <span class="token keyword">from</span> <span class="token string">'/assets/hqChart/umychart.stock.vue.js'</span>
</code></pre></div><p>data中：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    JSEnvironment<span class="token operator">:</span> <span class="token punctuation">{</span>
      Name<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      KLineIndex<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      MinuteChart<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// 走势图</span>
      MinuteOption<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      HistoryChart<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// K线图</span>
      HistoryOption<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      WidthPercent<span class="token operator">:</span> <span class="token number">0.653</span><span class="token punctuation">,</span>
      FiveDMinuteChart<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      FiveDMinuteOption<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      StockCache<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// 股票数据</span>
      <span class="token function-variable function">GetIndexByName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">.</span>KLineIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">var</span> item <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>KLineIndex<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>Name <span class="token operator">===</span> name<span class="token punctuation">)</span> <span class="token keyword">return</span> item<span class="token punctuation">.</span>Index
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">GetIndexName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> <span class="token keyword">this</span><span class="token punctuation">.</span>KLineIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">var</span> item <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>KLineIndex<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>Index <span class="token operator">===</span> index<span class="token punctuation">)</span> <span class="token keyword">return</span> item<span class="token punctuation">.</span>Name
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>methods中：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">LoadEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 分钟走势图配置</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>JSEnvironment<span class="token punctuation">.</span>MinuteOption <span class="token operator">=</span> <span class="token punctuation">{</span>
    Type<span class="token operator">:</span> <span class="token string">'分钟走势图'</span><span class="token punctuation">,</span>
    Symbol<span class="token operator">:</span> <span class="token string">'000001.sz'</span><span class="token punctuation">,</span> <span class="token comment">// 股票代码</span>
    EnableScrollUpDown<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 允许手势上下滚动页面</span>
    IsAutoUpate<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是自动更新数据</span>
    AutoUpdateFrequency<span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span> <span class="token comment">// 数据自动更新的周期</span>
    Windows<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> Index<span class="token operator">:</span> <span class="token string">'MACD'</span> <span class="token punctuation">}</span> <span class="token comment">// 指标</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    DayCount<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    IsShowRightMenu<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 右键菜单</span>
    IsShowCorssCursorInfo<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否显示十字光标的刻度信息</span>
    Border<span class="token operator">:</span> <span class="token punctuation">{</span>
      Left<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      Right<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      Top<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token comment">// 如果将top设置成0，会盖住标题</span>
      Bottom<span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    Frame<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> SplitCount<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> StringFormat<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> SplitCount<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> StringFormat<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> SplitCount<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> StringFormat<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> SplitCount<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> StringFormat<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// K线图配置</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>JSEnvironment<span class="token punctuation">.</span>HistoryOption <span class="token operator">=</span> <span class="token punctuation">{</span>
    Type<span class="token operator">:</span> <span class="token string">'历史K线图'</span><span class="token punctuation">,</span>
    Windows<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> Index<span class="token operator">:</span> <span class="token string">'均线'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> Index<span class="token operator">:</span> <span class="token string">'MACD'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    Symbol<span class="token operator">:</span> <span class="token string">'000001.sz'</span><span class="token punctuation">,</span> <span class="token comment">// 股票代码</span>
    EnableScrollUpDown<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 允许手势上下滚动页面</span>
    IsAutoUpdate<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是自动更新数据</span>
    AutoUpdateFrequency<span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span> <span class="token comment">// 数据自动更新的周期</span>
    IsShowRightMenu<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 右键菜单</span>
    KLine<span class="token operator">:</span> <span class="token punctuation">{</span>
      DragMode<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 拖拽模式 0 禁止拖拽 1 数据拖拽 2 区间选择</span>
      Right<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 复权 0 不复权 1 前复权 2 后复权</span>
      Period<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 周期 0 日线 1 周线 2 月线 3 年线</span>
      IsShowTooltip<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 是否显示K线提示信息</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    Border<span class="token operator">:</span> <span class="token punctuation">{</span>
      Left<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      Right<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      Top<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 如果将top设置成0，会盖住标题</span>
      Bottom<span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    Frame<span class="token operator">:</span> <span class="token comment">// 子框架设置</span>
    <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> SplitCount<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> StringFormat<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> SplitCount<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> StringFormat<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> SplitCount<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> StringFormat<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> SplitCount<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> StringFormat<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>created中：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>JSEnvironment<span class="token punctuation">.</span>StockCache <span class="token operator">=</span> jsStock<span class="token punctuation">.</span><span class="token function">JSStockInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 将数据赋给jsStock</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>JSEnvironment<span class="token punctuation">.</span>StockCache<span class="token punctuation">.</span><span class="token function">ReqeustData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>mounted中：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">LoadEnvironment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>分钟走势图：<br>
html：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>minuteChartID<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>minuteChartID<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>methods中：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">updateMinuteChart</span><span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 计算宽高</span>
  <span class="token keyword">const</span> minuteChartID <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>minuteChartID
  <span class="token keyword">const</span> minuteChartIDWidth <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth
  <span class="token keyword">const</span> minuteChartIDHeight <span class="token operator">=</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span> <span class="token operator">*</span> <span class="token number">92</span>
  minuteChartID<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> minuteChartIDWidth <span class="token operator">+</span> <span class="token string">'px'</span>
  minuteChartID<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> minuteChartIDHeight <span class="token operator">+</span> <span class="token string">'px'</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>JSEnvironment<span class="token punctuation">.</span>MinuteChart <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 初始化</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>JSEnvironment<span class="token punctuation">.</span>MinuteChart <span class="token operator">=</span> jsChart<span class="token punctuation">.</span><span class="token function">jsChartInit</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>minuteChartID<span class="token punctuation">)</span>
    jsChart<span class="token punctuation">.</span><span class="token function">jsChartStyle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>JSEnvironment<span class="token punctuation">.</span>MinuteOption<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>JSEnvironment<span class="token punctuation">.</span>MinuteChart<span class="token punctuation">.</span><span class="token function">SetOption</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>JSEnvironment<span class="token punctuation">.</span>MinuteOption<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>JSEnvironment<span class="token punctuation">.</span>MinuteChart<span class="token punctuation">.</span><span class="token function">ChangeDayCount</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 周期切换</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>JSEnvironment<span class="token punctuation">.</span>MinuteChart<span class="token punctuation">.</span><span class="token function">ChangeDayCount</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>切换分钟走势图周期：<br>
分时：<code>updateMinuteChart(1)</code><br>
五日：<code>updateMinuteChart(5)</code></p></li> <li><p>历史K线图：<br>
html:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>kLine<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>kLine<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>methods中：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">updateHistoryChart</span><span class="token punctuation">(</span><span class="token parameter">period</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 计算宽高</span>
  <span class="token keyword">const</span> kLine <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>kLine
  <span class="token keyword">const</span> kLineWidth <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth
  <span class="token keyword">const</span> kLineHeight <span class="token operator">=</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span> <span class="token operator">*</span> <span class="token number">92</span>
  kLine<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> kLineWidth <span class="token operator">+</span> <span class="token string">'px'</span>
  kLine<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> kLineHeight <span class="token operator">+</span> <span class="token string">'px'</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>JSEnvironment<span class="token punctuation">.</span>HistoryChart <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 初始化</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>JSEnvironment<span class="token punctuation">.</span>HistoryChart <span class="token operator">=</span> jsChart<span class="token punctuation">.</span><span class="token function">jsChartInit</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>kLine<span class="token punctuation">)</span> <span class="token comment">// 初始化K线图</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>JSEnvironment<span class="token punctuation">.</span>HistoryOption<span class="token punctuation">.</span>KLine<span class="token punctuation">.</span>Period <span class="token operator">=</span> period
    <span class="token keyword">this</span><span class="token punctuation">.</span>JSEnvironment<span class="token punctuation">.</span>HistoryChart<span class="token punctuation">.</span><span class="token function">SetOption</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>JSEnvironment<span class="token punctuation">.</span>HistoryOption<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 周期切换</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>JSEnvironment<span class="token punctuation">.</span>HistoryChart<span class="token punctuation">.</span><span class="token function">ChangePeriod</span><span class="token punctuation">(</span>period<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>切换历史K线图周期：<br>
日K：<code>updateHistoryChart(0)</code><br>
周K：<code>updateHistoryChart(1)</code><br>
月K：<code>updateHistoryChart(2)</code><br>
1分：<code>updateHistoryChart(4)</code><br>
5分：<code>updateHistoryChart(5)</code><br>
15分：<code>updateHistoryChart(6)</code><br>
30分：<code>updateHistoryChart(7)</code><br>
60分：<code>updateHistoryChart(8)</code></p></li></ul> <h2 id="设置api域名"><a href="#设置api域名" class="header-anchor">#</a> 设置API域名</h2> <p>修改接口域名可通过如下方法：</p> <div class="language-js extra-class"><pre class="language-js"><code>jsChart<span class="token punctuation">.</span>JSComplier<span class="token punctuation">.</span><span class="token function">SetDomain</span><span class="token punctuation">(</span><span class="token string">'http://4e8ede41.zealink.com'</span><span class="token punctuation">)</span>
jsChart<span class="token punctuation">.</span>JSChart<span class="token punctuation">.</span><span class="token function">SetDomain</span><span class="token punctuation">(</span><span class="token string">'http://4e8ede41.zealink.com'</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="hqchart横屏"><a href="#hqchart横屏" class="header-anchor">#</a> hqchart横屏</h2> <p>hqchart横屏非常简单，只需要修改Type就可以：</p> <ul><li>分时图：<code>Type: '分钟走势图横屏'</code></li> <li>K线图：<code>Type: '历史K线图横屏'</code></li></ul> <h2 id="行情更新频率"><a href="#行情更新频率" class="header-anchor">#</a> 行情更新频率</h2> <p>对于行情更新频率，分两种情况来阐述：</p> <ol><li><p><strong>行情自动更新</strong></p> <p>对于设置行情自动更新，与两个参数有关：</p> <div class="language-js extra-class"><pre class="language-js"><code>  IsAutoUpate<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是自动更新数据</span>
  AutoUpdateFrequency<span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span> <span class="token comment">// 数据自动更新的周期</span>
</code></pre></div></li> <li><p><strong>行情不自动更新</strong></p> <p>对于行情不自动更新，文档中给出的说法是将<code>IsAutoUpate</code>改为<code>false</code>，但是经实践此方法无效。</p> <p>所以经实践，行情不更新需要调用<code>StopAutoUpdate()</code>方法，具体调用如下：</p> <ul><li>分钟走势图调用：<code>this.JSEnvironment.MinuteChart.StopAutoUpdate()</code></li> <li>历史K线图调用：<code>this.JSEnvironment.HistoryChart.StopAutoUpdate()</code></li></ul></li></ol> <h2 id="自定义指标"><a href="#自定义指标" class="header-anchor">#</a> 自定义指标</h2> <p>自定义指标是指指标的参数可以被修改。下面具体介绍如下几种指标：</p> <h3 id="ma"><a href="#ma" class="header-anchor">#</a> MA</h3> <ol><li><p><strong>定义</strong></p> <p>MA：移动平均线，简称MA，MA是用统计分析的方法，将一定时期内的证券价格（指数）加以平均，并把不同时间的平均值连接起来，形成一根MA，用以观察证券价格变动趋势的一种技术指标。</p></li> <li><p><strong>通达信公式</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token string">'MA1:MA(CLOSE,M1);\n\
  MA2:MA(CLOSE,M2);\n\
  MA3:MA(CLOSE,M3);\n'</span>
</code></pre></div><p>CLOSE代表收盘价，M1、M2、M3代表天数，hqchart中默认是5天、10天、20天，常用线有5天、10天、30天、60天、120天和240天的指标。<br>
用法：MA(X,N)，即(X1+X2+X3+...+Xn)/N。</p></li> <li><p><strong>代码编写</strong></p> <ul><li><p>新建两个文件<code>defaultsettings.js</code>和<code>quotascript.js</code>：</p> <div class="language- extra-class"><pre class="language-text"><code>├── assets                       
│   ├── hqChart                    
│   │   ├── umychart.stock.vue.js           # 股票数据
│   │   ├── umychart.vue.js                 # 图形绘制
│   │   ├── defaultsettings.js              # 默认指标参数
│   │   ├── quotascript.js                  # 通达信公式
</code></pre></div><p>defaultsettings.js是默认的指标参数：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token string">'MA'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'M1'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'M2'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'M3'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>quotascript.js是通达信公式：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token string">'MA'</span><span class="token operator">:</span>
    <span class="token string">'MA1:MA(CLOSE,M1);\n\
    MA2:MA(CLOSE,M2);\n\
    MA3:MA(CLOSE,M3);\n'</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>指标切换：</p> <ul><li>分钟走势图调用：<br> <code>this.JSEnvironment.MinuteChart.ChangeScriptIndex(2, this.quotaSettings[quotaName])</code></li> <li>历史K线图调用：
<code>this.JSEnvironment.HistoryChart.ChangeScriptIndex(1, this.quotaSettings[quotaName])</code></li></ul> <div class="custom-block tip"><p class="custom-block-title">方法解析：</p> <p><code>ChangeScriptIndex</code>是切换指标的方法。第一个参数代表在第几个窗口显示该指标，第二个参数是该指标的名称、具体参数和通达信公式。<br>
this.quotaSettings[quotaName]是：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  Name<span class="token operator">:</span> <span class="token string">'MA'</span><span class="token punctuation">,</span>
  Args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'M1'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'M2'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'M3'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  Script<span class="token operator">:</span> <span class="token string">'MA1:MA(CLOSE,M1);\n\
          MA2:MA(CLOSE,M2);\n\
          MA3:MA(CLOSE,M3);\n'</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>Args</code>和<code>Script</code>需要根据用户设置的均线数量和天数去动态的显示。</p></div></li></ul></li></ol> <h3 id="vol"><a href="#vol" class="header-anchor">#</a> VOL</h3> <ol><li><p><strong>定义</strong></p> <p>VOL：VOL是成交量指标，成交量是指个股或大盘的成交总手，在形态上用一根立式的柱子来表示。如当天收盘价高于或等于当天的开盘价，成交柱呈红色；反之，成交柱呈绿色。</p></li> <li><p><strong>通达信公式</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token string">'VOL:VOL,VOLSTICK;\n\
  MA1:MA(VOL,M1);\n\
  MA2:MA(VOL,M2);'</span><span class="token punctuation">,</span>
</code></pre></div><p>VOL代表成交量，VOLSTICK代表收市价高于昨日的，画红色空心实体；否则画绿色实心实体。<br>
M1和M2代表天数，默认是5天、10天。MA1和MA2是均量线，将一定时期的成交量相加后平均，形成较为平滑的曲线。</p></li> <li><p><strong>代码编写</strong></p> <ul><li>defaultsettings.js文件中添加：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'VOL'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'M1'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'M2'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><ul><li>quotascript.js文件中添加：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'VOL'</span><span class="token operator">:</span> 
  <span class="token string">'VOL:VOL,VOLSTICK;\n\
  MA1:MA(VOL,M1);\n\
  MA2:MA(VOL,M2);'</span>
</code></pre></div><ul><li><p>指标切换：</p> <ul><li>分钟走势图调用：<br> <code>this.JSEnvironment.MinuteChart.ChangeScriptIndex(2, this.quotaSettings[quotaName])</code></li> <li>历史K线图调用：
<code>this.JSEnvironment.HistoryChart.ChangeScriptIndex(1, this.quotaSettings[quotaName])</code></li></ul> <div class="custom-block tip"><p class="custom-block-title">方法解析：</p> <p><code>ChangeScriptIndex</code>是切换指标的方法。第一个参数代表在第几个窗口显示该指标，第二个参数是该指标的名称、具体参数和通达信公式。<br>
this.quotaSettings[quotaName]是：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  Name<span class="token operator">:</span> <span class="token string">'VOL'</span><span class="token punctuation">,</span>
  Args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'M1'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'M2'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  Script<span class="token operator">:</span> <span class="token string">'VOL:VOL,VOLSTICK;\n\
          MA1:MA(VOL,M1);\n\
          MA2:MA(VOL,M2);'</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>Args</code>需要根据用户设置的天数去动态的显示。</p></div></li></ul></li></ol> <h3 id="macd"><a href="#macd" class="header-anchor">#</a> MACD</h3> <ol><li><p><strong>定义</strong></p> <p>MACD：MACD称为异同移动平均线，是从双指数移动平均线发展而来的，由快的指数移动平均线（EMA12）减去慢的指数移动平均线（EMA26）得到快线DIF，再用2×（快线DIF-DIF的9日加权移动均线DEA）得到MACD柱。</p></li> <li><p><strong>通达信公式</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token string">'DIF:EMA(CLOSE,SHORT)-EMA(CLOSE,LONG);\n\
  DEA:EMA(DIF,MID);\n\
  MACD:(DIF-DEA)*2,COLORSTICK;'</span>
</code></pre></div></li> <li><p><strong>代码编写</strong></p> <ul><li>defaultsettings.js文件中添加：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'MACD'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'SHORT'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'LONG'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">26</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'MID'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><ul><li>quotascript.js文件中添加：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'MACD'</span><span class="token operator">:</span>
  <span class="token string">'DIF:EMA(CLOSE,SHORT)-EMA(CLOSE,LONG);\n\
  DEA:EMA(DIF,MID);\n\
  MACD:(DIF-DEA)*2,COLORSTICK;'</span>
</code></pre></div><ul><li><p>指标切换：</p> <ul><li>分钟走势图调用：<br> <code>this.JSEnvironment.MinuteChart.ChangeScriptIndex(2, this.quotaSettings[quotaName])</code></li> <li>历史K线图调用：
<code>this.JSEnvironment.HistoryChart.ChangeScriptIndex(1, this.quotaSettings[quotaName])</code></li></ul> <div class="custom-block tip"><p class="custom-block-title">方法解析：</p> <p><code>ChangeScriptIndex</code>是切换指标的方法。第一个参数代表在第几个窗口显示该指标，第二个参数是该指标的名称、具体参数和通达信公式。<br>
this.quotaSettings[quotaName]是：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  Name<span class="token operator">:</span> <span class="token string">'MACD'</span><span class="token punctuation">,</span>
  Args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'SHORT'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'LONG'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">26</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'MID'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  Script<span class="token operator">:</span> <span class="token string">'DIF:EMA(CLOSE,SHORT)-EMA(CLOSE,LONG);\n\
          DEA:EMA(DIF,MID);\n\
          MACD:(DIF-DEA)*2,COLORSTICK;'</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>Args</code>需要根据用户设置的天数去动态的显示。</p></div></li></ul></li></ol> <h3 id="kdj"><a href="#kdj" class="header-anchor">#</a> KDJ</h3> <ol><li><p><strong>定义</strong></p> <p>KDJ：随机指标。通过一个特定的周期（常为9日、9周等）内出现过的最高价、最低价及最后一个计算周期的收盘价及这三者之间的比例关系，来计算最后一个计算周期的未成熟随机值RSV，然后根据平滑移动平均线的方法来计算K值、D值与J值，并绘成曲线图来研判股票走势。</p></li> <li><p><strong>通达信公式</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\n\
K:SMA(RSV,M1,1);\n\
D:SMA(K,M2,1);\n\
J:3*K-2*D;'</span>
</code></pre></div></li> <li><p><strong>代码编写</strong></p> <ul><li>defaultsettings.js文件中添加：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'KDJ'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'N'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'M1'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'M2'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><ul><li>quotascript.js文件中添加：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'KDJ'</span><span class="token operator">:</span>
  <span class="token string">'RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\n\
  K:SMA(RSV,M1,1);\n\
  D:SMA(K,M2,1);\n\
  J:3*K-2*D;'</span>
</code></pre></div><ul><li><p>指标切换：</p> <ul><li>分钟走势图调用：<br> <code>this.JSEnvironment.MinuteChart.ChangeScriptIndex(2, this.quotaSettings[quotaName])</code></li> <li>历史K线图调用：
<code>this.JSEnvironment.HistoryChart.ChangeScriptIndex(1, this.quotaSettings[quotaName])</code></li></ul> <div class="custom-block tip"><p class="custom-block-title">方法解析：</p> <p><code>ChangeScriptIndex</code>是切换指标的方法。第一个参数代表在第几个窗口显示该指标，第二个参数是该指标的名称、具体参数和通达信公式。<br>
this.quotaSettings[quotaName]是：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  Name<span class="token operator">:</span> <span class="token string">'KDJ'</span><span class="token punctuation">,</span>
  Args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'N'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'M1'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'M2'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  Script<span class="token operator">:</span> <span class="token string">'RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\n\
            K:SMA(RSV,M1,1);\n\
            D:SMA(K,M2,1);\n\
            J:3*K-2*D;'</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>Args</code>需要根据用户设置的天数去动态的显示。</p></div></li></ul></li></ol> <h3 id="rsi"><a href="#rsi" class="header-anchor">#</a> RSI</h3> <ol><li><p><strong>定义</strong></p> <p>RSI：相对强弱指标。根据一定时期内上涨点数和涨跌点数之和的比率制作出的一种技术曲线。</p></li> <li><p><strong>通达信公式</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'LC:=REF(CLOSE,1);\n\
RSI1:SMA(MAX(CLOSE-LC,0),N1,1)/SMA(ABS(CLOSE-LC),N1,1)*100;\n\
RSI2:SMA(MAX(CLOSE-LC,0),N2,1)/SMA(ABS(CLOSE-LC),N2,1)*100;\n\
RSI3:SMA(MAX(CLOSE-LC,0),N3,1)/SMA(ABS(CLOSE-LC),N3,1)*100;'</span>
</code></pre></div></li> <li><p><strong>代码编写</strong></p> <ul><li>defaultsettings.js文件中添加：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'RSI'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'N1'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'N2'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'N3'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><ul><li>quotascript.js文件中添加：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'RSI'</span><span class="token operator">:</span>
  <span class="token string">'LC:=REF(CLOSE,1);\n\
  RSI1:SMA(MAX(CLOSE-LC,0),N1,1)/SMA(ABS(CLOSE-LC),N1,1)*100;\n\
  RSI2:SMA(MAX(CLOSE-LC,0),N2,1)/SMA(ABS(CLOSE-LC),N2,1)*100;\n\
  RSI3:SMA(MAX(CLOSE-LC,0),N3,1)/SMA(ABS(CLOSE-LC),N3,1)*100;'</span>
</code></pre></div><ul><li><p>指标切换：</p> <ul><li>分钟走势图调用：<br> <code>this.JSEnvironment.MinuteChart.ChangeScriptIndex(2, this.quotaSettings[quotaName])</code></li> <li>历史K线图调用：
<code>this.JSEnvironment.HistoryChart.ChangeScriptIndex(1, this.quotaSettings[quotaName])</code></li></ul> <div class="custom-block tip"><p class="custom-block-title">方法解析：</p> <p><code>ChangeScriptIndex</code>是切换指标的方法。第一个参数代表在第几个窗口显示该指标，第二个参数是该指标的名称、具体参数和通达信公式。<br>
this.quotaSettings[quotaName]是：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  Name<span class="token operator">:</span> <span class="token string">'RSI'</span><span class="token punctuation">,</span>
  Args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'N1'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'N2'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'N3'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  Script<span class="token operator">:</span> <span class="token string">'LC:=REF(CLOSE,1);\n\
            RSI1:SMA(MAX(CLOSE-LC,0),N1,1)/SMA(ABS(CLOSE-LC),N1,1)*100;\n\
            RSI2:SMA(MAX(CLOSE-LC,0),N2,1)/SMA(ABS(CLOSE-LC),N2,1)*100;\n\
            RSI3:SMA(MAX(CLOSE-LC,0),N3,1)/SMA(ABS(CLOSE-LC),N3,1)*100;'</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>Args</code>需要根据用户设置的天数去动态的显示。</p></div></li></ul></li></ol> <h3 id="boll"><a href="#boll" class="header-anchor">#</a> BOLL</h3> <ol><li><p><strong>定义</strong></p> <p>BOLL：布林线。该指标在图形上画出三条线，其中上下两条线可以分别看成是股价的压力线和支撑线，而在两条线之间还有一条股价平均线，布林线指标的参数最好设为20。</p></li> <li><p><strong>通达信公式</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'BOLL:MA(CLOSE,M);\n\
UB:BOLL+2*STD(CLOSE,M);\n\
LB:BOLL-2*STD(CLOSE,M);'</span>
</code></pre></div></li> <li><p><strong>代码编写</strong></p> <ul><li>defaultsettings.js文件中添加：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'BOLL'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'M'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><ul><li>quotascript.js文件中添加：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'BOLL'</span><span class="token operator">:</span>
  <span class="token string">'BOLL:MA(CLOSE,M);\n\
  UB:BOLL+2*STD(CLOSE,M);\n\
  LB:BOLL-2*STD(CLOSE,M);'</span>
</code></pre></div><ul><li><p>指标切换：</p> <ul><li>分钟走势图调用：<br> <code>this.JSEnvironment.MinuteChart.ChangeScriptIndex(2, this.quotaSettings[quotaName])</code></li> <li>历史K线图调用：
<code>this.JSEnvironment.HistoryChart.ChangeScriptIndex(1, this.quotaSettings[quotaName])</code></li></ul> <div class="custom-block tip"><p class="custom-block-title">方法解析：</p> <p><code>ChangeScriptIndex</code>是切换指标的方法。第一个参数代表在第几个窗口显示该指标，第二个参数是该指标的名称、具体参数和通达信公式。<br>
this.quotaSettings[quotaName]是：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  Name<span class="token operator">:</span> <span class="token string">'BOLL'</span><span class="token punctuation">,</span>
  Args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> Name<span class="token operator">:</span><span class="token string">'M'</span><span class="token punctuation">,</span> Value<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  Script<span class="token operator">:</span> <span class="token string">'BOLL:MA(CLOSE,M);\n\
            UB:BOLL+2*STD(CLOSE,M);\n\
            LB:BOLL-2*STD(CLOSE,M);'</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>Args</code>需要根据用户设置的天数去动态的显示。</p></div></li></ul></li></ol> <h3 id="pb"><a href="#pb" class="header-anchor">#</a> PB</h3> <ol><li><p><strong>定义</strong></p> <p>PB：市净率。指的是每股股价与每股净资产的比率。</p></li> <li><p><strong>通达信公式</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'PB:C/FINANCE(34)'</span>
</code></pre></div></li> <li><p><strong>代码编写</strong></p> <ul><li>quotascript.js文件中添加：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'PB'</span><span class="token operator">:</span>
  <span class="token string">'PB:C/FINANCE(34)'</span><span class="token punctuation">,</span>
</code></pre></div><ul><li><p>指标切换：</p> <ul><li>分钟走势图调用：<br> <code>this.JSEnvironment.MinuteChart.ChangeScriptIndex(2, this.quotaSettings[quotaName])</code></li> <li>历史K线图调用：
<code>this.JSEnvironment.HistoryChart.ChangeScriptIndex(1, this.quotaSettings[quotaName])</code></li></ul> <div class="custom-block tip"><p class="custom-block-title">方法解析：</p> <p><code>ChangeScriptIndex</code>是切换指标的方法。第一个参数代表在第几个窗口显示该指标，第二个参数是该指标的名称、具体参数和通达信公式。<br>
this.quotaSettings[quotaName]是：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  Name<span class="token operator">:</span> <span class="token string">'PB'</span><span class="token punctuation">,</span>
  Args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  Script<span class="token operator">:</span> <span class="token string">'PB:C/FINANCE(34)'</span>
<span class="token punctuation">}</span>
</code></pre></div></div></li></ul></li></ol> <h3 id="pe-ttm"><a href="#pe-ttm" class="header-anchor">#</a> PE(TTM)</h3></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/web-doc/assets/js/app.968e2cce.js" defer></script><script src="/web-doc/assets/js/2.fa5e476e.js" defer></script><script src="/web-doc/assets/js/39.00aa4147.js" defer></script>
  </body>
</html>
